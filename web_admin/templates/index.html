<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>账号管理后台</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>📊 账号管理后台</h1>
            <div style="display: flex; gap: 10px;">
                <button id="btnImport" class="btn-success">📥 导入账号</button>
                <button id="btnDelete" class="btn-danger">🗑️ 批量删除选中</button>
                <button id="btnExport" class="btn-primary">📤 批量导出选中</button>
            </div>
        </header>

        <div class="card">
            <div class="controls filters">
                <strong>列显示：</strong>
                <label><input type="checkbox" class="column-toggle" data-column="password" checked> 密码</label>
                <label><input type="checkbox" class="column-toggle" data-column="recovery_email" checked> 辅助邮箱</label>
                <label><input type="checkbox" class="column-toggle" data-column="secret_key" checked> 2FA密钥</label>
                <label><input type="checkbox" class="column-toggle" data-column="verification_link" checked> SheerID链接</label>
                <span style="margin: 0 15px;">|</span>
                <strong>状态筛选：</strong>
                <label><input type="checkbox" class="filter-cb" value="pending_check" checked> 待检测资格</label>
                <label><input type="checkbox" class="filter-cb" value="link_ready" checked> 有资格待验证已提取链接</label>
                <label><input type="checkbox" class="filter-cb" value="verified" checked> 已验证未绑卡</label>
                <label><input type="checkbox" class="filter-cb" value="subscribed" checked> 已绑卡订阅</label>
                <label><input type="checkbox" class="filter-cb" value="ineligible" checked> 无资格</label>
                <label><input type="checkbox" class="filter-cb" value="error" checked> 错误/超时</label>
                <span style="flex-grow: 1;"></span>
                <input type="text" id="searchInput" placeholder="搜索邮箱...">
            </div>
            <div id="countDisplay" style="margin-bottom: 10px; color: #666;">加载中...</div>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAll"></th>
                            <th>邮箱</th>
                            <th data-column="password">密码</th>
                            <th data-column="recovery_email">辅助邮箱</th>
                            <th data-column="secret_key">2FA 密钥</th>
                            <th data-column="verification_link">SheerID 链接</th>
                            <th>状态</th>
                        </tr>
                    </thead>
                    <tbody id="accountTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 导入模态框 -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">导入账号</div>
            <div class="modal-body">
                <p>输入账号信息（每行一个）：</p>
                <textarea id="importText" rows="10" style="width: 100%; font-family: monospace; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" placeholder="email|password|backup@mail.com|2FASECRET
user@gmail.com|Pass123"></textarea>
                
                <div style="margin-top: 15px;">
                    <label><strong>分隔符：</strong></label>
                    <select id="importSeparator" style="padding: 5px; margin-left: 10px;">
                        <option value="----">---- (四短横)</option>
                        <option value="|" selected>| (竖线)</option>
                        <option value=",">， (逗号)</option>
                        <option value=";">; (分号)</option>
                        <option value="\t">Tab</option>
                        <option value="custom">自定义...</option>
                    </select>
                    <input type="text" id="customSeparator" placeholder="输入自定义分隔符" style="display: none; padding: 5px; margin-left: 10px; width: 150px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                
                <div style="margin-top: 15px;">
                    <label><strong>导入为状态：</strong></label>
                    <select id="importStatus" style="padding: 5px; margin-left: 10px;">
                        <option value="pending_check" selected>待检测资格</option>
                        <option value="link_ready">有资格待验证</option>
                        <option value="verified">已验证未绑卡</option>
                        <option value="subscribed">已绑卡订阅</option>
                        <option value="ineligible">无资格</option>
                        <option value="error">错误/超时</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelImport" class="btn-secondary">取消</button>
                <button id="btnConfirmImport" class="btn-success">导入</button>
            </div>
        </div>
    </div>

    <!-- 导出模态框 -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">导出账号</div>
            <div class="modal-body">
                <p>选择要导出的字段（使用 '----' 分隔）：</p>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="email" checked disabled> 邮箱（始终包含）</label></div>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="password" checked> 密码</label></div>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="recovery_email" checked> 辅助邮箱</label></div>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="secret_key" checked> 2FA 密钥</label></div>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="verification_link" checked> SheerID 链接</label></div>
                <div class="field-group"><label><input type="checkbox" class="export-field" value="status"> 状态</label></div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelExport" class="btn-secondary">取消</button>
                <button id="btnConfirmExport" class="btn-success">下载 .txt</button>
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
